
ALTER DATABASE [VTUCARE] ADD FILEGROUP [settlement_archive_201502]
ALTER DATABASE [VTUCARE] ADD FILEGROUP [settlement_archive_201503]
ALTER DATABASE [VTUCARE] ADD FILEGROUP [settlement_archive_201504]
ALTER DATABASE [VTUCARE] ADD FILEGROUP [settlement_archive_201505]
ALTER DATABASE [VTUCARE] ADD FILEGROUP [settlement_archive_201506]
ALTER DATABASE [VTUCARE] ADD FILEGROUP [settlement_archive_201507]
ALTER DATABASE [VTUCARE] ADD FILEGROUP [settlement_archive_201508]
ALTER DATABASE [VTUCARE] ADD FILEGROUP [settlement_archive_201509]
ALTER DATABASE [VTUCARE] ADD FILEGROUP [settlement_archive_201510]
ALTER DATABASE [VTUCARE] ADD FILEGROUP [settlement_archive_201511]
ALTER DATABASE [VTUCARE] ADD FILEGROUP [settlement_archive_201512]
ALTER DATABASE [VTUCARE] ADD FILEGROUP [settlement_archive_201601]
ALTER DATABASE [VTUCARE] ADD FILEGROUP [settlement_archive_201602]
ALTER DATABASE [VTUCARE] ADD FILEGROUP [settlement_archive_201603]
ALTER DATABASE [VTUCARE] ADD FILEGROUP [settlement_archive_201604]
ALTER DATABASE [VTUCARE] ADD FILEGROUP [settlement_archive_201605]
ALTER DATABASE [VTUCARE] ADD FILEGROUP [settlement_archive_201606]
ALTER DATABASE [VTUCARE] ADD FILEGROUP [settlement_archive_201607]
ALTER DATABASE [VTUCARE] ADD FILEGROUP [settlement_archive_201608]
ALTER DATABASE [VTUCARE] ADD FILEGROUP [settlement_archive_201609]
ALTER DATABASE [VTUCARE] ADD FILEGROUP [settlement_archive_201610]
ALTER DATABASE [VTUCARE] ADD FILEGROUP [settlement_archive_201611]
ALTER DATABASE [VTUCARE] ADD FILEGROUP [settlement_archive_201612]
ALTER DATABASE [VTUCARE] ADD FILEGROUP [settlement_archive_201701]
ALTER DATABASE [VTUCARE] ADD FILEGROUP [settlement_archive_201702]
ALTER DATABASE [VTUCARE] ADD FILEGROUP [settlement_archive_201703]

--ALTER DATABASE [VTUCARE] ADD FILE ( NAME = N'settlement_archive_file_201502', FILENAME = N'J:\SQLSERVER\DATA\Transaction_File_201502.ndf', SIZE = 3072KB , FILEGROWTH = 262144KB ) TO FILEGROUP [settlement_archive_201502]
ALTER DATABASE [VTUCARE] ADD FILE ( NAME = N'settlement_archive_file_201503', FILENAME = N'J:\SQLSERVER\DATA\Transaction_File_201503.ndf', SIZE = 3072KB , FILEGROWTH = 262144KB ) TO FILEGROUP [settlement_archive_201503]
ALTER DATABASE [VTUCARE] ADD FILE ( NAME = N'settlement_archive_file_201504', FILENAME = N'J:\SQLSERVER\DATA\Transaction_File_201504.ndf', SIZE = 3072KB , FILEGROWTH = 262144KB ) TO FILEGROUP [settlement_archive_201504]
ALTER DATABASE [VTUCARE] ADD FILE ( NAME = N'settlement_archive_file_201505', FILENAME = N'J:\SQLSERVER\DATA\Transaction_File_201505.ndf', SIZE = 3072KB , FILEGROWTH = 262144KB ) TO FILEGROUP [settlement_archive_201505]
ALTER DATABASE [VTUCARE] ADD FILE ( NAME = N'settlement_archive_file_201506', FILENAME = N'J:\SQLSERVER\DATA\Transaction_File_201506.ndf', SIZE = 3072KB , FILEGROWTH = 262144KB ) TO FILEGROUP [settlement_archive_201506]
ALTER DATABASE [VTUCARE] ADD FILE ( NAME = N'settlement_archive_file_201507', FILENAME = N'J:\SQLSERVER\DATA\Transaction_File_201507.ndf', SIZE = 3072KB , FILEGROWTH = 262144KB ) TO FILEGROUP [settlement_archive_201507]
ALTER DATABASE [VTUCARE] ADD FILE ( NAME = N'settlement_archive_file_201508', FILENAME = N'J:\SQLSERVER\DATA\Transaction_File_201508.ndf', SIZE = 3072KB , FILEGROWTH = 262144KB ) TO FILEGROUP [settlement_archive_201508]
ALTER DATABASE [VTUCARE] ADD FILE ( NAME = N'settlement_archive_file_201509', FILENAME = N'J:\SQLSERVER\DATA\Transaction_File_201509.ndf', SIZE = 3072KB , FILEGROWTH = 262144KB ) TO FILEGROUP [settlement_archive_201509]
ALTER DATABASE [VTUCARE] ADD FILE ( NAME = N'settlement_archive_file_201510', FILENAME = N'J:\SQLSERVER\DATA\Transaction_File_201510.ndf', SIZE = 3072KB , FILEGROWTH = 262144KB ) TO FILEGROUP [settlement_archive_201510]
ALTER DATABASE [VTUCARE] ADD FILE ( NAME = N'settlement_archive_file_201511', FILENAME = N'J:\SQLSERVER\DATA\Transaction_File_201511.ndf', SIZE = 3072KB , FILEGROWTH = 262144KB ) TO FILEGROUP [settlement_archive_201511]
ALTER DATABASE [VTUCARE] ADD FILE ( NAME = N'settlement_archive_file_201512', FILENAME = N'J:\SQLSERVER\DATA\Transaction_File_201512.ndf', SIZE = 3072KB , FILEGROWTH = 262144KB ) TO FILEGROUP [settlement_archive_201512]
ALTER DATABASE [VTUCARE] ADD FILE ( NAME = N'settlement_archive_file_201601', FILENAME = N'G:\SQLSERVER\DATA\Transaction_File_201601.ndf', SIZE = 3072KB , FILEGROWTH = 262144KB ) TO FILEGROUP [settlement_archive_201601]
ALTER DATABASE [VTUCARE] ADD FILE ( NAME = N'settlement_archive_file_201602', FILENAME = N'G:\SQLSERVER\DATA\Transaction_File_201602.ndf', SIZE = 3072KB , FILEGROWTH = 262144KB ) TO FILEGROUP [settlement_archive_201602]
ALTER DATABASE [VTUCARE] ADD FILE ( NAME = N'settlement_archive_file_201603', FILENAME = N'G:\SQLSERVER\DATA\Transaction_File_201603.ndf', SIZE = 3072KB , FILEGROWTH = 262144KB ) TO FILEGROUP [settlement_archive_201603]
ALTER DATABASE [VTUCARE] ADD FILE ( NAME = N'settlement_archive_file_201604', FILENAME = N'G:\SQLSERVER\DATA\Transaction_File_201604.ndf', SIZE = 3072KB , FILEGROWTH = 262144KB ) TO FILEGROUP [settlement_archive_201604]
ALTER DATABASE [VTUCARE] ADD FILE ( NAME = N'settlement_archive_file_201605', FILENAME = N'G:\SQLSERVER\DATA\Transaction_File_201605.ndf', SIZE = 3072KB , FILEGROWTH = 262144KB ) TO FILEGROUP [settlement_archive_201605]
ALTER DATABASE [VTUCARE] ADD FILE ( NAME = N'settlement_archive_file_201606', FILENAME = N'G:\SQLSERVER\DATA\Transaction_File_201606.ndf', SIZE = 3072KB , FILEGROWTH = 262144KB ) TO FILEGROUP [settlement_archive_201606]
ALTER DATABASE [VTUCARE] ADD FILE ( NAME = N'settlement_archive_file_201607', FILENAME = N'G:\SQLSERVER\DATA\Transaction_File_201607.ndf', SIZE = 3072KB , FILEGROWTH = 262144KB ) TO FILEGROUP [settlement_archive_201607]
ALTER DATABASE [VTUCARE] ADD FILE ( NAME = N'settlement_archive_file_201608', FILENAME = N'G:\SQLSERVER\DATA\Transaction_File_201608.ndf', SIZE = 3072KB , FILEGROWTH = 262144KB ) TO FILEGROUP [settlement_archive_201608]
ALTER DATABASE [VTUCARE] ADD FILE ( NAME = N'settlement_archive_file_201609', FILENAME = N'G:\SQLSERVER\DATA\Transaction_File_201609.ndf', SIZE = 3072KB , FILEGROWTH = 262144KB ) TO FILEGROUP [settlement_archive_201609]
ALTER DATABASE [VTUCARE] ADD FILE ( NAME = N'settlement_archive_file_201610', FILENAME = N'G:\SQLSERVER\DATA\Transaction_File_201610.ndf', SIZE = 3072KB , FILEGROWTH = 262144KB ) TO FILEGROUP [settlement_archive_201610]
ALTER DATABASE [VTUCARE] ADD FILE ( NAME = N'settlement_archive_file_201611', FILENAME = N'G:\SQLSERVER\DATA\Transaction_File_201611.ndf', SIZE = 3072KB , FILEGROWTH = 262144KB ) TO FILEGROUP [settlement_archive_201611]
ALTER DATABASE [VTUCARE] ADD FILE ( NAME = N'settlement_archive_file_201612', FILENAME = N'G:\SQLSERVER\DATA\Transaction_File_201612.ndf', SIZE = 3072KB , FILEGROWTH = 262144KB ) TO FILEGROUP [settlement_archive_201612]
ALTER DATABASE [VTUCARE] ADD FILE ( NAME = N'settlement_archive_file_201701', FILENAME = N'G:\SQLSERVER\DATA\Transaction_File_201701.ndf', SIZE = 3072KB , FILEGROWTH = 262144KB ) TO FILEGROUP [settlement_archive_201701]
ALTER DATABASE [VTUCARE] ADD FILE ( NAME = N'settlement_archive_file_201702', FILENAME = N'G:\SQLSERVER\DATA\Transaction_File_201702.ndf', SIZE = 3072KB , FILEGROWTH = 262144KB ) TO FILEGROUP [settlement_archive_201702]
ALTER DATABASE [VTUCARE] ADD FILE ( NAME = N'settlement_archive_file_201703', FILENAME = N'G:\SQLSERVER\DATA\Transaction_File_201703.ndf', SIZE = 3072KB , FILEGROWTH = 262144KB ) TO FILEGROUP [settlement_archive_201703]
 CREATE PARTITION FUNCTION partition_vtuvcare_archive_db_by_month (DATETIME)  AS  RANGE LEFT FOR VALUES 
  (  
'2015-01-31 23:59:59.999',
'2015-02-28 23:59:59.999',
'2015-03-31 23:59:59.999',
'2015-04-30 23:59:59.999',
'2015-05-31 23:59:59.999',
'2015-06-30 23:59:59.999',
'2015-07-31 23:59:59.999',
'2015-08-31 23:59:59.999',
'2015-09-30 23:59:59.999',
'2015-10-31 23:59:59.999',
'2015-11-30 23:59:59.999',
'2015-12-31 23:59:59.999',
'2016-01-31 23:59:59.999',
'2016-02-29 23:59:59.999',
'2016-03-31 23:59:59.999',
'2016-04-30 23:59:59.999',
'2016-05-31 23:59:59.999',
'2016-06-30 23:59:59.999',
'2016-07-31 23:59:59.999',
'2016-08-31 23:59:59.999',
'2016-09-30 23:59:59.999',
'2016-10-31 23:59:59.999',
'2016-11-30 23:59:59.999',
'2016-12-31 23:59:59.999',
'2017-01-31 23:59:59.999',
'2017-02-28 23:59:59.999',
'2017-03-31 23:59:59.999'
)
CREATE PARTITION SCHEME monthly_vtucare_archive_db_partition_scheme AS PARTITION partition_quickteller_db_by_month TO (
[settlement_archive_201501],
[settlement_archive_201502],
[settlement_archive_201503],
[settlement_archive_201504],
[settlement_archive_201505],
[settlement_archive_201506],
[settlement_archive_201507],
[settlement_archive_201508],
[settlement_archive_201509],
[settlement_archive_201510],
[settlement_archive_201511],
[settlement_archive_201512],
[settlement_archive_201601],
[settlement_archive_201602],
[settlement_archive_201603],
[settlement_archive_201604],
[settlement_archive_201605],
[settlement_archive_201606],
[settlement_archive_201607],
[settlement_archive_201608],
[settlement_archive_201609],
[settlement_archive_201610],
[settlement_archive_201611],
[settlement_archive_201612],
[settlement_archive_201701],
[settlement_archive_201702],
[settlement_archive_201703]
)


USE [vtucare]
GO

/****** Object:  Table [dbo].[tbl_settlement_archive]    Script Date: 3/6/2017 12:10:47 PM ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

SET ANSI_PADDING ON
GO

CREATE TABLE [dbo].[tbl_settlement_archive_temp](
	[id] [int] IDENTITY(1,1) NOT NULL,
	[settlement] [money] NOT NULL,
	[settlement_type] [int] NOT NULL,
	[settlement_date] [datetime] NOT NULL,
	[transaction_id] [int] NOT NULL,
	[transaction_type] [int] NOT NULL,
	[settlement_institution] [varchar](100) NOT NULL,
	[settlement_institution_bank_domain_id] [int] NULL,
	[domain_id] [int] NOT NULL,
	[product_group_id] [int] NOT NULL,
	[channel_id] [int] NOT NULL
) ON  partition_vtuvcare_archive_db_by_month(settlement_date)

GO

SET ANSI_PADDING OFF
GO
/*
ALTER TABLE [dbo].[tbl_settlement_archive_temp]  WITH CHECK ADD FOREIGN KEY([domain_id])
REFERENCES [dbo].[tbl_domains] ([domain_id])
GO

ALTER TABLE [dbo].[tbl_settlement_archive_temp]  WITH CHECK ADD FOREIGN KEY([settlement_type])
REFERENCES [dbo].[tbl_settlement_type] ([id])
GO
*/


